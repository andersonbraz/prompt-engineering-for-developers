# INTERATIVE

Quando estou desenvolvendo aplicações com grandes modelos de linguagem, acho que nunca cheguei ao prompt final logo na primeira tentativa.

Mas isso não é o que importa. Desde que você tenha um bom processo para melhorar seu prompt de forma iterativa, conseguirá chegar a algo que funcione bem para a tarefa que deseja realizar.

Você talvez já tenha me ouvido dizer que, quando treino um modelo de aprendizado de máquina, ele quase nunca funciona na primeira vez. Na verdade, fico muito surpreso quando o primeiro modelo que treinei funciona. Acho que, com prompts, as chances de funcionar na primeira tentativa são um pouco maiores, mas como ele disse, não importa se o primeiro prompt funciona — o mais importante é o processo para chegar a prompts que funcionem para sua aplicação.

Então, com isso, vamos mergulhar no código e vou mostrar algumas estruturas para pensar sobre como desenvolver um prompt de forma iterativa.

Se você já fez uma aula de aprendizado de máquina comigo antes, talvez tenha me visto usar um diagrama que mostra que, no desenvolvimento de machine learning, você geralmente tem uma ideia e depois a implementa. Ou seja, escreve o código, coleta os dados, treina o modelo, e isso gera um resultado experimental. Você pode então analisar esse resultado, talvez fazer uma análise de erros, descobrir onde está funcionando ou não, e até mesmo mudar sua ideia sobre qual problema quer resolver ou como abordá-lo. Depois, muda a implementação, roda outro experimento, e assim por diante — iterando várias vezes até chegar a um modelo eficaz.

Se você não está familiarizado com aprendizado de máquina e nunca viu esse diagrama antes, não se preocupe. Não é tão importante para o restante desta apresentação.

Mas, ao escrever prompts para desenvolver uma aplicação usando um LLM (modelo de linguagem de larga escala), o processo pode ser bem parecido. Você tem uma ideia do que quer fazer, a tarefa que deseja completar, e pode então fazer uma primeira tentativa de escrever um prompt que, com sorte, seja claro e específico, e talvez — se for o caso — dê ao sistema tempo para pensar. Depois você roda o prompt e vê o resultado que obtém.

Se não funcionar bem na primeira vez, o processo iterativo de descobrir por que as instruções, por exemplo, não estavam claras o suficiente, ou por que não deu tempo suficiente para o algoritmo pensar, permite que você refine a ideia, refine o prompt, e assim por diante — passando por esse ciclo várias vezes até chegar a um prompt que funcione para sua aplicação.

É por isso também que, pessoalmente, não dou tanta atenção aos artigos da internet que dizem “30 prompts perfeitos”, porque acho que provavelmente não existe um prompt perfeito para tudo que há sob o sol. O mais importante é ter um processo para desenvolver um bom prompt para sua aplicação específica.

Então, vamos ver um exemplo juntos no código. Aqui tenho o código inicial que você viu nos vídeos anteriores: import OpenAI, import OS. Aqui pegamos a chave da API do OpenAI, e esta é a mesma função auxiliar que você viu da última vez.

E vou usar como exemplo contínuo neste vídeo a tarefa de resumir uma ficha técnica de uma cadeira. Então, vou apenas colar isso aqui.

Sinta-se à vontade para pausar o vídeo e ler com mais atenção no notebook à esquerda, se quiser. Aqui está uma ficha técnica de uma cadeira com uma descrição dizendo que ela faz parte de uma bela família com inspiração no design de meados do século, e assim por diante. Fala sobre a construção, tem as dimensões, opções da cadeira, materiais, etc. Ela vem da Itália.

Então, digamos que você queira pegar essa ficha técnica e ajudar uma equipe de marketing a escrever uma descrição para um site de varejo online.

Vou apenas executar rapidamente esses três comandos, e então vamos criar um prompt como o seguinte, e vou apenas... colar isso aqui.

Meu prompt aqui diz: sua tarefa é ajudar uma equipe de marketing a criar a descrição para um site de varejo com base em uma ficha técnica, escrever uma descrição do produto, e assim por diante. Certo? Essa é minha primeira tentativa de explicar a tarefa para o modelo de linguagem.

Então vou pressionar shift-enter, e isso leva alguns segundos para rodar, e obtemos esse resultado. Parece que ele fez um bom trabalho escrevendo uma descrição, introduzindo uma cadeira de escritório com inspiração de meados do século, uma adição perfeita, e assim por diante. Mas quando olho para isso, penso: nossa, isso está realmente longo. Ele fez um bom trabalho fazendo exatamente o que pedi, que foi começar a partir da ficha técnica e escrever uma descrição do produto.

Mas quando olho para isso, penso: está meio longo.

Talvez queiramos que seja um pouco mais curto. Então, tive uma ideia, escrevi um prompt, obtive um resultado. Não fiquei tão satisfeito porque está muito longo. Então, vou esclarecer meu prompt e dizer: use no máximo 50 palavras para tentar dar uma orientação melhor sobre o comprimento desejado. E vamos rodar isso novamente.

Ok. Isso parece realmente uma descrição curta e mais agradável do produto, introduzindo uma cadeira de escritório com inspiração de meados do século, e assim por diante. Algo como “estilosa e prática”. Nada mal. E vou verificar o comprimento disso. Então, vou pegar a resposta, dividir onde há espaços, e então, sabe, imprimir o comprimento. São 52 palavras. Na verdade, não está ruim.

Modelos de linguagem de grande escala são bons, mas não tão precisos ao seguir instruções sobre uma contagem exata de palavras. Mas isso está aceitável. Às vezes ele gera algo com 60 ou 65 palavras, e por aí vai, mas está dentro do razoável.

Algumas coisas que você pode tentar fazer seriam dizer: use no máximo três frases.

Vou executar isso novamente. Mas essas são diferentes maneiras de dizer ao modelo de linguagem qual o comprimento da saída que você deseja.

Então aqui temos uma, duas, três... conto três frases. Parece que fiz um bom trabalho. E também já vi pessoas fazerem coisas como, sei lá, usar no máximo 280 caracteres. Modelos de linguagem de grande escala, por causa da forma como interpretam texto — usando algo chamado tokenizador, sobre o qual não vou falar agora — tendem a ser mais ou menos precisos ao contar caracteres.

Mas vamos ver: 281 caracteres. Na verdade, surpreendentemente próximo. Normalmente um modelo de linguagem não acerta tão bem assim. Mas essas são diferentes formas que você pode experimentar para tentar controlar o comprimento da saída que obtém. Agora vou voltar para a instrução de usar no máximo 50 palavras.

E aí está o resultado que tivemos há pouco.

À medida que continuamos refinando esse texto para nossos sites, podemos decidir que, na verdade, esse site não vende diretamente para consumidores, mas sim para lojistas de móveis — que estariam mais interessados nos detalhes técnicos da cadeira e nos materiais utilizados.

Nesse caso, você pode pegar esse prompt e dizer: quero modificá-lo para que seja mais preciso sobre os detalhes técnicos.

Então vou continuar modificando esse prompt.

E vou dizer:

Essa descrição é destinada a lojistas de móveis, então deve ser técnica e focar nos materiais, produtos e na construção.

Vamos rodar isso.

Vamos ver.

Nada mal. Diz, por exemplo, base de alumínio revestida e cadeira pneumática, materiais de alta qualidade. Então, ao mudar o prompt, você consegue fazer com que ele foque mais nas características específicas que deseja.

E ao olhar para isso, posso decidir que, no final da descrição, também quero incluir o ID do produto.

As duas versões dessa cadeira são SWC 110 e SWC 100. Então talvez eu possa melhorar ainda mais esse prompt.

Para fazer com que ele me dê os IDs dos produtos, posso adicionar esta instrução ao final da descrição:

Inclua todo ID de produto com 7 caracteres na especificação técnica.

Vamos rodar isso e ver o que acontece.

E então ele diz: apresentamos nossa cadeira de escritório Miss Agents 5, cores da estrutura, fala sobre revestimento plástico, base de alumínio, opções práticas, menciona os dois IDs de produto. Então, isso parece bem bom.

E o que você acabou de ver é um exemplo curto do desenvolvimento iterativo de prompts que muitos desenvolvedores seguem.

E eu acho que uma boa diretriz é: no último vídeo, você viu Isa compartilhar várias boas práticas. Então, o que eu costumo fazer é manter essas boas práticas em mente — ser claro e específico e, se necessário, dar tempo para o modelo pensar. Com isso em mente, vale a pena fazer uma primeira tentativa de escrever um prompt, ver o que acontece e, a partir daí, refiná-lo iterativamente para chegar cada vez mais perto do resultado desejado.

Muitos dos prompts bem-sucedidos que você vê sendo usados em diversos programas foram criados por meio de um processo iterativo como esse. Só por diversão, deixe-me mostrar um exemplo de um prompt ainda mais complexo, que pode dar uma ideia do que o ChatGPT consegue fazer. Eu apenas adicionei algumas instruções extras aqui: após a descrição, incluir uma tabela com as dimensões do produto e formatar tudo como HTML. Vamos rodar isso.

Na prática, você só chega a um prompt como esse depois de várias iterações. Não conheço ninguém que escreveria esse prompt exato na primeira vez que tentasse fazer o sistema processar uma ficha técnica.

E isso realmente gera um monte de HTML. Vamos exibir o HTML para ver se ele é válido e se funciona. Na verdade, não sei se vai funcionar, mas vamos ver. Ah, legal! Parece que foi renderizado.

Então temos uma descrição bem bonita da cadeira, construção, materiais, dimensões do produto. Ah, parece que deixei de fora a instrução de usar no máximo 50 palavras, então está um pouco longo. Mas se quiser, pode pausar o vídeo, pedir para ser mais sucinto e regenerar isso para ver os resultados.

Espero que você tenha entendido com este vídeo que o desenvolvimento de prompts é um processo iterativo. Experimente algo, veja como ele ainda não atende exatamente ao que você quer, e então pense em como esclarecer suas instruções — ou, em alguns casos, como dar mais espaço para o modelo pensar — para chegar mais perto dos resultados desejados.

A chave para ser um bom engenheiro de prompts não é tanto saber o prompt perfeito, mas sim ter um bom processo para desenvolver prompts eficazes para sua aplicação. Neste vídeo, ilustrei o desenvolvimento de um prompt usando apenas um exemplo. Para aplicações mais sofisticadas, às vezes você terá múltiplos exemplos — digamos, uma lista de 10, 50 ou até 100 fichas técnicas — e desenvolverá o prompt de forma iterativa, avaliando-o em um conjunto maior de casos.

Mas no início do desenvolvimento da maioria das aplicações, vejo muitas pessoas fazendo como eu fiz — com apenas um exemplo. E depois, para aplicações mais maduras, pode ser útil avaliar prompts com um conjunto maior de exemplos, como testar diferentes prompts em dezenas de fichas técnicas para ver o desempenho médio ou no pior caso. Mas geralmente você só faz isso quando a aplicação está mais madura e precisa dessas métricas para guiar os últimos passos de melhoria do prompt.

Então, com isso, experimente os exemplos no Jupyter Notebook, teste diferentes variações e veja os resultados que você obtém. E quando terminar, vamos para o próximo vídeo, onde falaremos sobre um uso muito comum de grandes modelos de linguagem em aplicações de software: resumir textos. Quando estiver pronto, vamos para o próximo vídeo.
